name: Cleanup All Workflow Runs

on:
  # æ‰‹åŠ¨ç‚¹æŒ‰é’®è§¦å‘
  workflow_dispatch:
  # å¦‚æœæƒ³è¦è‡ªåŠ¨å®šæœŸæ¸…ç†ï¼ŒåŠ ä¸ªå®šæ—¶ä»»åŠ¡ï¼ˆç¤ºä¾‹ï¼šæ¯å¤© 03:00 UTCï¼‰

jobs:
  cleanup:
    runs-on: ubuntu-latest
    permissions:
      actions: write
      contents: read

    steps:
      - name: Delete ALL workflow runs in this repo
        uses: Mattraks/delete-workflow-runs@v2
        with:
          # ç”¨ä½ åˆšæ‰å»ºçš„ PATï¼Œä¹Ÿå¯ä»¥æ¢æˆåˆ«çš„åå­—
          token: ${{ secrets.DELETE_ACTION_RUN_TOKEN }}
          repository: ${{ github.repository }}

          # ğŸ‘‡ å…³é”®ä¸¤è¡Œï¼šä¸ä¿ç•™å†å²ã€ä¹Ÿä¸é™åˆ¶å¤©æ•° = å…¨åˆ 
          retain_days: 0           # é»˜è®¤æ˜¯ 30 å¤©ï¼Œä¸æ”¹çš„è¯ 30 å¤©å†…çš„ run æ°¸è¿œåˆ ä¸æ‰
          keep_minimum_runs: 0     # ä¸ä¿ç•™ä»»ä½• run

          # ğŸ‘‡ ä¸‹é¢å‡ ä¸ªè®¾ç½®æˆ ALLï¼Œè¡¨ç¤ºä¸åšè¿‡æ»¤ï¼Œæ‰€æœ‰ workflowã€æ‰€æœ‰çŠ¶æ€éƒ½åˆ 
          delete_workflow_pattern: ""               # ä¸ºç©ºæˆ–ä¸å†™ = æ‰€æœ‰ workflow
          delete_workflow_by_state_pattern: "ALL"   # active / disabled éƒ½ç®—
          delete_run_by_conclusion_pattern: "ALL"   # success / failure / skipped ç­‰éƒ½åˆ 

          dry_run: false          # ä¸º true æ—¶åªæ‰“å°ä¸åˆ é™¤ï¼Œè®°å¾—å…³æ‰
